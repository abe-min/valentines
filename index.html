<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Will you be my Valentine?</title>
  <meta name="description" content="A tiny Valentine page" />
  <style>
    :root{
      --bg1:#ffdde1;
      --bg2:#ee9ca7;
      --card:#ffffffcc;
      --text:#2b2b2b;
      --yes:#22c55e;
      --no:#ef4444;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: radial-gradient(circle at top, var(--bg1), var(--bg2));
      color:var(--text);
      overflow:hidden;
    }
    .card{
      width:min(720px, 92vw);
      padding:28px 22px;
      background:var(--card);
      backdrop-filter: blur(8px);
      border-radius:22px;
      box-shadow: 0 20px 60px rgba(0,0,0,.18);
      text-align:center;
      position:relative;
      z-index:2;
    }
    h1{margin:0 0 10px;font-size:clamp(28px,4vw,44px)}
    p{margin:0 0 18px;font-size:clamp(16px,2.2vw,20px);line-height:1.4}
    .names{
      font-weight:700;
      font-size:clamp(18px,2.2vw,22px);
      margin:10px 0 22px;
    }
    .btns{
      display:flex;
      gap:12px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top:10px;
    }
    button{
      border:0;
      padding:14px 18px;
      border-radius:999px;
      font-size:18px;
      font-weight:700;
      cursor:pointer;
      transition: transform .08s ease, filter .15s ease;
      min-width:140px;
    }
    button:active{transform:scale(.98)}
    #yesBtn{background:var(--yes); color:white}
    #noBtn{background:var(--no); color:white; position:relative}
    .hint{font-size:14px; opacity:.8; margin-top:14px}
    #result{
      margin-top:18px;
      font-size:20px;
      font-weight:800;
      min-height:28px;
    }
    /* floating hearts */
    .heart{
      position:absolute;
      width:16px;height:16px;
      background:#ff4d6d;
      transform: rotate(45deg);
      opacity:.8;
      animation: floatUp linear forwards;
      z-index:1;
    }
    .heart::before,.heart::after{
      content:"";
      position:absolute;
      width:16px;height:16px;
      background:#ff4d6d;
      border-radius:50%;
    }
    .heart::before{left:-8px;top:0}
    .heart::after{left:0;top:-8px}
    @keyframes floatUp{
      from{transform:translateY(20vh) rotate(45deg); opacity:.0}
      10%{opacity:.85}
      to{transform:translateY(-120vh) rotate(45deg); opacity:0}
    }
    a{color:#111;text-decoration:underline}
  </style>
</head>
<body>
  <div class="card">
    <h1>ğŸ’˜ Will you be my Valentine?</h1>
    <div class="names">
      <span id="toName">Betty</span> - From <span id="fromName">Abe</span>
    </div>

    <p id="message">
      I was hoping youâ€™d say yes ğŸ˜Š
    </p>

    <div class="btns">
      <button id="yesBtn">Yes! ğŸ’–</button>
      <button id="noBtn">No ğŸ™ˆ</button>
    </div>

    <div id="result"></div>
  </div>

<script>
  const params = new URLSearchParams(location.search);

  // Basic personalization
  const to = params.get("to") || "To Betty";
  const from = params.get("from") || "Abe";
  const msg = params.get("msg") || "I was hoping youâ€™d say yes ğŸ˜Š";

  // Date details (new)
  const where = params.get("where") || "To be revealed";
  const when = params.get("when") || "Feb 14, 8:00 PM";
  const attire = params.get("attire") || "You look gorgeous in anything âœ¨";
  const plan = params.get("plan") || "I'll take care of everything ğŸ’–";
  const note = params.get("note") || "Iâ€™ll take care of everything ğŸ’–";

  const card = document.querySelector(".card");
  const body = document.body;

  document.getElementById("toName").textContent = to;
  document.getElementById("fromName").textContent = from;
  document.getElementById("message").textContent = msg;

  const yesBtn = document.getElementById("yesBtn");
  const noBtn = document.getElementById("noBtn");

  let cancelNextClick = false;

// Capture-phase click blocker (stops iOS from "clicking what's underneath")
document.addEventListener(
  "click",
  (e) => {
    if (cancelNextClick) {
      e.preventDefault();
      e.stopPropagation();
      cancelNextClick = false;
    }
  },
  true
);

// Make sure touch listeners can call preventDefault on iOS
function armClickCancel() {
  cancelNextClick = true;
  setTimeout(() => (cancelNextClick = false), 450);
}

  function escapeHtml(s) {
    return String(s).replace(/[&<>"']/g, (c) => ({
      "&": "&amp;",
      "<": "&lt;",
      ">": "&gt;",
      '"': "&quot;",
      "'": "&#039;"
    }[c]));
  }

  function moveNoButton() {
    const rect = noBtn.getBoundingClientRect();
    const pad = 12;
    const x = Math.random() * (window.innerWidth - rect.width - pad * 2) + pad;
    const y = Math.random() * (window.innerHeight - rect.height - pad * 2) + pad;
    noBtn.style.position = "fixed";
    noBtn.style.left = `${x}px`;
    noBtn.style.top = `${y}px`;
  }

  noBtn.addEventListener("mouseenter", moveNoButton);
  noBtn.addEventListener("click", (e) => { e.preventDefault(); moveNoButton(); });

  yesBtn.addEventListener("click", () => {
    body.style.background = "radial-gradient(circle at top, #ffe6f0, #ff7aa2)";

    // Replace entire card with date details
    card.innerHTML = `
      <h1 style="margin:0 0 10px;">ğŸ’– Itâ€™s a date!</h1>
      <p style="margin:0 0 18px;font-size:18px;line-height:1.5;">
        You just made my day ğŸ¥° Here are the details:
      </p>
      

      <div style="
        text-align:left;
        background:#ffffffd9;
        border-radius:18px;
        padding:16px 16px;
        box-shadow: 0 10px 30px rgba(0,0,0,.12);
        font-size:16px;
      ">
        <div style="display:flex; gap:10px; padding:10px 0; border-bottom:1px solid rgba(0,0,0,.08);">
          <div style="width:90px;font-weight:800;">ğŸ“ Where</div>
          <div>${escapeHtml(where)}</div>
        </div>

        <div style="display:flex; gap:10px; padding:10px 0; border-bottom:1px solid rgba(0,0,0,.08);">
          <div style="width:90px;font-weight:800;">ğŸ—“ï¸ When</div>
          <div>${escapeHtml(when)}</div>
        </div>

        <div style="display:flex; gap:10px; padding:10px 0; border-bottom:1px solid rgba(0,0,0,.08);">
          <div style="width:90px;font-weight:800;">ğŸ‘— Attire</div>
          <div>${escapeHtml(attire)}</div>
        </div>

        <div style="display:flex; gap:10px; padding:10px 0; border-bottom:1px solid rgba(0,0,0,.08);">
          <div style="width:90px;font-weight:800;">âœ¨ Plan</div>
          <div>${escapeHtml(plan)}</div>
        </div>

        <!--<div style="display:flex; gap:10px; padding:10px 0;">
          <div style="width:90px;font-weight:800;">ğŸ’Œ Note</div>
          <div>${escapeHtml(note)}</div>
        </div>-->
      </div>

      <div style="margin-top:18px;font-weight:800;font-size:18px;">
        â€” ${escapeHtml(from)}
      </div>

      <div style="margin-top:18px;font-size:26px;">ğŸ’˜âœ¨ğŸ’˜</div>
      <p style="margin-top:10px;font-size:13px;opacity:.75;">
        (P.S. You can screenshot this ğŸ˜„)
      </p>
    `;

    popHearts(60);
    if (navigator.vibrate) navigator.vibrate([90, 40, 90]);
  });

  function popHearts(n = 20) {
    for (let i = 0; i < n; i++) {
      const h = document.createElement("div");
      h.className = "heart";
      const size = 12 + Math.random() * 22;
      h.style.width = h.style.height = `${size}px`;
      h.style.left = `${Math.random() * 100}vw`;
      h.style.bottom = `-20px`;
      h.style.animationDuration = `${2 + Math.random() * 3}s`;
      document.body.appendChild(h);
      setTimeout(() => h.remove(), 6000);
    }
  }

  setInterval(() => popHearts(2), 850);
</script>
</body>
</html>